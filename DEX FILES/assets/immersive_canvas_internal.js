var h,l=function(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}},m=function(a){var b=typeof Symbol!="undefined"&&Symbol.iterator&&a[Symbol.iterator];if(b)return b.call(a);if(typeof a.length=="number")return{next:l(a)};throw Error(String(a)+" is not an iterable or ArrayLike");},n=function(a){if(a instanceof Array)return a;a=m(a);for(var b,c=[];!(b=a.next()).done;)c.push(b.value);return c};/*

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/
var r=this||self,t=function(a,b){a=a.split(".");var c=r;a[0]in c||typeof c.execScript=="undefined"||c.execScript("var "+a[0]);for(var d;a.length&&(d=a.shift());)a.length||b===void 0?c[d]&&c[d]!==Object.prototype[d]?c=c[d]:c=c[d]={}:c[d]=b},v=function(a,b){u.prototype[a]=b};function w(a,b){a.setAttribute("sandbox",b&&!a.getAttribute("srcdoc")?"allow-scripts allow-forms allow-same-origin allow-popups allow-top-navigation":"allow-scripts allow-forms");b?a.setAttribute("allow","fullscreen; autoplay"):a.removeAttribute("allow")};/*

 Copyright Google LLC
 SPDX-License-Identifier: Apache-2.0
*/
function x(a){return{valueOf:a}.valueOf()};var y=globalThis.trustedTypes,A;function B(){var a=null;if(!y)return a;try{var b=function(c){return c};a=y.createPolicy("goog#html",{createHTML:b,createScript:b,createScriptURL:b})}catch(c){}return a};var C=function(a){this.g=a};C.prototype.toString=function(){return this.g};new C("about:blank");new C("about:invalid#zClosurez");var D=x(function(){return typeof URL==="function"}),E=["data:","http:","https:","mailto:","ftp:"];var F=function(a){this.g=a};F.prototype.toString=function(){return this.g+""};function G(a){A===void 0&&(A=B());var b=A;return new F(b?b.createHTML(a):a)}function H(a){if(a instanceof F)return a.g;throw Error("");};function I(a,b){var c=b.createRange();c.selectNode(b.body);a=G(a);return c.createContextualFragment(H(a))};function J(a){a=a.nodeName;return typeof a==="string"?a:"FORM"}function K(a){a=a.nodeType;return a===1||typeof a!=="number"};var N=function(a,b,c,d){var k=new Map(M);this.j=a;this.g=k;this.l=b;this.m=c;this.h=d},O=function(a,b,c){c=a.g.get(c);return(c==null?0:c.has(b))?c.get(b):a.l.has(b)?{i:1}:(c=a.m.get(b))?c:a.h&&[].concat(n(a.h)).some(function(d){return b.indexOf(d)===0})?{i:1}:{i:0}};var P="ARTICLE SECTION NAV ASIDE H1 H2 H3 H4 H5 H6 HEADER FOOTER ADDRESS P HR PRE BLOCKQUOTE OL UL LH LI DL DT DD FIGURE FIGCAPTION MAIN DIV EM STRONG SMALL S CITE Q DFN ABBR RUBY RB RT RTC RP DATA TIME CODE VAR SAMP KBD SUB SUP I B U MARK BDI BDO SPAN BR WBR NOBR INS DEL PICTURE PARAM TRACK MAP TABLE CAPTION COLGROUP COL TBODY THEAD TFOOT TR TD TH SELECT DATALIST OPTGROUP OPTION OUTPUT PROGRESS METER FIELDSET LEGEND DETAILS SUMMARY MENU DIALOG SLOT CANVAS FONT CENTER ACRONYM BASEFONT BIG DIR HGROUP STRIKE TT".split(" "),
M=[["A",new Map([["href",{i:2}]])],["AREA",new Map([["href",{i:2}]])],["LINK",new Map([["href",{i:5,conditions:new Map([["rel",new Set("alternate author bookmark canonical cite help icon license next prefetch dns-prefetch prerender preconnect preload prev search subresource".split(" "))]])}]])],["SOURCE",new Map([["src",{i:5}],["srcset",{i:6}]])],["IMG",new Map([["src",{i:5}],["srcset",{i:6}]])],["VIDEO",new Map([["src",{i:5}]])],["AUDIO",new Map([["src",{i:5}]])]],Q="title aria-atomic aria-autocomplete aria-busy aria-checked aria-current aria-disabled aria-dropeffect aria-expanded aria-haspopup aria-hidden aria-invalid aria-label aria-level aria-live aria-multiline aria-multiselectable aria-orientation aria-posinset aria-pressed aria-readonly aria-relevant aria-required aria-selected aria-setsize aria-sort aria-valuemax aria-valuemin aria-valuenow aria-valuetext alt align autocapitalize autocomplete autocorrect autofocus autoplay bgcolor border cellpadding cellspacing checked color cols colspan controls datetime disabled download draggable enctype face formenctype frameborder height hreflang hidden ismap label lang loop max maxlength media minlength min multiple muted nonce open placeholder preload rel required reversed role rows rowspan selected shape size sizes slot span spellcheck start step summary translate type valign value width wrap itemscope itemtype itemid itemprop itemref".split(" "),
R=[["dir",{i:3,conditions:x(function(){return new Map([["dir",new Set(["auto","ltr","rtl"])]])})}],["async",{i:3,conditions:x(function(){return new Map([["async",new Set(["async"])]])})}],["cite",{i:2}],["loading",{i:3,conditions:x(function(){return new Map([["loading",new Set(["eager","lazy"])]])})}],["poster",{i:2}],["target",{i:3,conditions:x(function(){return new Map([["target",new Set(["_self","_blank"])]])})}]],S=new N(new Set(P),new Set(Q),new Map(R)),T=new N(new Set(P.concat(["BUTTON","INPUT"])),
new Set(x(function(){return Q.concat(["class","id","name"])})),new Map(x(function(){return R.concat([["style",{i:1}]])}))),U=new N(new Set(x(function(){return P.concat("STYLE TITLE INPUT TEXTAREA BUTTON LABEL".split(" "))})),new Set(x(function(){return Q.concat(["class","id","tabindex","contenteditable","name"])})),new Map(x(function(){return R.concat([["style",{i:1}]])})),new Set(["data-","aria-"]));var V=function(a){this.h=a};V.prototype.g=function(a){this.j(a)};V.prototype.j=function(a){var b=document.implementation.createHTMLDocument("");a=W(this,a,b);b=b.body;b.appendChild(a);b=(new XMLSerializer).serializeToString(b);b=b.slice(b.indexOf(">")+1,b.lastIndexOf("</"));G(b)};
var W=function(a,b,c){b=I(b,c);b=document.createTreeWalker(b,5,function(g){return aa(a,g)});for(var d=b.nextNode(),k=c.createDocumentFragment(),e=k;d!==null;){var f=void 0;if(d.nodeType===3)f=document.createTextNode(d.data);else if(K(d))f=ba(a,d,c);else throw Error("");e.appendChild(f);if(d=b.firstChild())e=f;else for(;!(d=b.nextSibling())&&(d=b.parentNode());)e=e.parentNode}return k},ba=function(a,b,c){var d=J(b);c=c.createElement(d);b=b.attributes;for(var k=m(b),e=k.next();!e.done;e=k.next()){var f=
e.value;e=f.name;f=f.value;var g=O(a.h,e,d),p;a:{if(p=g.conditions){p=m(p);for(var q=p.next();!q.done;q=p.next()){var z=m(q.value);q=z.next().value;z=z.next().value;var L=void 0;if((q=(L=b.getNamedItem(q))==null?void 0:L.value)&&!z.has(q)){p=!1;break a}}}p=!0}if(p)switch(g.i){case 1:X(c,e,f);break;case 2:b:if(g=void 0,D){try{g=new URL(f)}catch(ca){g="https:";break b}g=g.protocol}else c:{g=document.createElement("a");try{g.href=f}catch(ca){g=void 0;break c}g=g.protocol;g=g===":"||g===""?"https:":g}f=
g!==void 0&&E.indexOf(g.toLowerCase())!==-1?f:"about:invalid#zClosurez";X(c,e,f);break;case 3:X(c,e,f.toLowerCase());break;case 4:X(c,e,f);break;case 5:X(c,e,f);break;case 6:X(c,e,f)}}return c},aa=function(a,b){if(b.nodeType===3)return 1;if(!K(b))return 2;b=J(b);if(b===null)return 2;a=a.h;return b!=="FORM"&&(a.j.has(b)||a.g.has(b))?1:2};function X(a,b,c){a.setAttribute(b,c)}var da=x(function(){return new V(S)}),ea=x(function(){return new V(T)}),fa=x(function(){return new V(U)});var ha={0:1,1:1},ia={0:.1,1:.1};function ja(a,b){try{fa.g(a)}catch(c){return Y(b,"H_SLSANITIZE"),!0}try{ea.g(a)}catch(c){return Y(b,"H_RSANITIZE"),!0}try{da.g(a)}catch(c){return Y(b,"H_SANITIZE"),!0}return!1}function Y(a,b){(Z?Z:typeof window!=="undefined"&&window.navigator&&window.navigator.sendBeacon!==void 0?navigator.sendBeacon.bind(navigator):ka)("https://csp.withgoogle.com/csp/lcreport/"+a.o,JSON.stringify({host:window.location.hostname,type:b,additionalData:void 0}))}
function ka(a,b){var c=new XMLHttpRequest;c.open("POST",a);c.setRequestHeader("Content-Type","application/json");c.send(b)}var Z;t("setIframeSrc",function(a,b){var c=document.getElementById("immersive-container");c&&(c.setAttribute("src",a),c.removeAttribute("srcdoc"),w(c,b))});
t("setIframeSrcdoc",function(a,b){var c=document.getElementById("immersive-container");if(c){a=a===null?"null":a===void 0?"undefined":a;var d={o:"0fec772b-f870-4237-b500-cfb6e0fb5aaa"},k;if(k=d){var e,f;k=Math.random()<((f=(e=d.O)!=null?e:ha[d.o[0]])!=null?f:0)}if(k&&window.SAFEVALUES_REPORTING!==!1&&"DocumentFragment"in window){var g,p;Math.random()<((p=(g=d.N)!=null?g:ia[d.o[0]])!=null?p:0)&&Y(d,"HEARTBEAT");ja(a,d)||(a instanceof F?e=a:(e=String(a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,
"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"),e=G(e)),e.toString()!==a&&Y(d,"H_ESCAPE"))}a=G(a);c.srcdoc=H(a);c.removeAttribute("src");w(c,b)}});var u=function(a,b,c,d,k,e,f){this.g=a;this.h=b;this.l=c;this.headerHeightPx=d;this.m=k;this.userInfo=e;this.deviceInfo=f;this.j=-1};h=u.prototype;
h.u=function(a){if(a.source!==this.h)console.error("Received message from unexpected frame");else{var b=a.data;console.info("Received message type: "+b.type);switch(b.type){case "send_text_query":immersiveCanvasBridge.sendTextQueryWithToken(this.g,b.query);break;case "exit":immersiveCanvasBridge.exitApp(this.g,b.finalText||"");break;case "onload":immersiveCanvasBridge.onLoad(this.g,"immersiveCanvasMessageHandler");break;case "output_tts":immersiveCanvasBridge.outputTts(this.g,b.requestId,b.tts,b.openMic);
break;case "StopTTS":this.j!==-1&&Date.now()-this.j<=this.m&&immersiveCanvasBridge.stopTts(this.g);break;case "onUpdateDone":immersiveCanvasBridge.onUpdateDone(this.g,b.requestId);break;case "onAsyncCallbackComplete":break;case "on_state_update":immersiveCanvasBridge.onStateUpdate(this.g,b.state);break;case "CloseStreamingMic":immersiveCanvasBridge.exitContinuousMatchMode(this.g);break;case "log_error":immersiveCanvasBridge.logJsRuntimeError(this.g,b.errorName,b.fileName,b.line,b.column);break;case "startMediaSession":immersiveCanvasBridge.startMediaSession(this.g);
break;case "stopMediaSession":immersiveCanvasBridge.stopMediaSession(this.g);break;case "GetImmersiveApiLibUrl":this.h.postMessage({type:"ImmersiveApiLibUrl",url:this.l,headerHeightPx:this.headerHeightPx,userInfo:this.userInfo,deviceInfo:this.deviceInfo},"*");break;case "GetUserParamRequest":immersiveCanvasBridge.getUserParam(this.g,b.paramKey);break;case "SetUserParamRequest":immersiveCanvasBridge.setUserParam(this.g,b.actionId,b.paramKey,JSON.stringify(b.paramValue));break;case "ResetUserParamRequest":immersiveCanvasBridge.resetUserParams(this.g,
b.actionId);break;case "ExpectIntent":immersiveCanvasBridge.expectIntent(this.g,JSON.stringify(b));break;case "ClearExpectation":immersiveCanvasBridge.clearExpectation(this.g,b.clearAllIntentsExpectation,b.intentId||"");break;case "TriggerScene":immersiveCanvasBridge.triggerScene(this.g,b.sceneName);break;case "OpenStreamingMic":this.j=-1;a=b.durationSeconds;var c=b.enableSpelledPhraseBiasing,d=immersiveCanvasBridge,k=d.enterContinuousMatchMode,e=this.g,f=[];b=m(b.expectedPhrases);for(var g=b.next();!g.done;g=
b.next())f.push(JSON.stringify(g.value));k.call(d,e,f,a,c);break;case "CanvasWakeLock":immersiveCanvasBridge.handleCanvasWakeLockMessage(this.g,b.action);break;case "DocumentClick":this.j=Date.now();break;case "LaunchYTApp":case "SetScreenNavigationHandler":case "UpdateGoBackHandler":break;case "GetHomeParamRequest":case "SetHomeParamRequest":case "ResetHomeParamRequest":console.error("get/set/resetHomeParam(s) APIs are not supported on this surface.");break;case "SetTypeOverride":immersiveCanvasBridge.setTypeOverride(this.g,
JSON.stringify(b));break;case "ResetTypeOverride":immersiveCanvasBridge.resetTypeOverrides(this.g);break;default:throw Error("The message type is not supported");}}};h.s=function(a,b){this.h.postMessage({type:"payload",requestId:a,data:b},"*")};h.C=function(a,b,c){c=c===void 0?{}:c;this.h.postMessage({type:"OutputTtsStatus",requestId:a,status:b,statusInfo:c},"*")};h.H=function(a){this.h.postMessage({type:"TtsEndpointEvent",ttsState:3,index:0,numTts:1,name:a},"*")};
h.M=function(a){this.h.postMessage({type:"SendTextQueryStatus",status:a},"*")};h.B=function(a,b){this.h.postMessage({type:"MicModeUpdate",micMode:a,changeReason:b||"UNKNOWN_REASON"},"*")};h.v=function(a){this.h.postMessage({type:"InputStatusUpdate",inputStatus:a},"*")};h.G=function(a,b){this.h.postMessage({type:"StreamingPhraseMatch",hypothesisMatchSets:a,isFinal:b},"*")};h.A=function(a,b,c){this.h.postMessage({type:"MediaControl",command:a,seekPosition:b,seekRelative:c},"*")};
h.F=function(){this.h.postMessage({type:"ResumeMessage"},"*")};h.D=function(){this.h.postMessage({type:"PauseMessage"},"*")};h.J=function(a,b,c){this.h.postMessage({type:"GetUserParamResponse",status:a,paramKey:b,paramValue:c},"*")};h.L=function(a,b,c,d){this.h.postMessage({type:"SetUserParamResponse",actionId:a,paramKey:c,status:b,errorMessage:d},"*")};h.K=function(a,b){b=JSON.parse(b);this.h.postMessage({type:"IntentMatchResponse",intentId:a,value:b},"*")};
h.I=function(a){this.h.postMessage({type:"UserInteraction",interactionType:a},"*")};t("initializeMessageHandler",function(a,b,c,d,k,e){var f=document.getElementById("immersive-container");f&&f.contentWindow&&(a=new u(a,f.contentWindow,b,c,d,k,e),window.addEventListener("message",a.u.bind(a)),t("immersiveCanvasMessageHandler",a))});v("update",u.prototype.s);v("onOutputTtsStatus",u.prototype.C);v("onTtsMark",u.prototype.H);v("sendTextQueryStatus",u.prototype.M);v("onMicModeUpdate",u.prototype.B);
v("onInputStatusChanged",u.prototype.v);v("onStreamingPhraseMatch",u.prototype.G);v("onMediaControl",u.prototype.A);v("onResume",u.prototype.F);v("onPause",u.prototype.D);v("sendSetUserParamStatus",u.prototype.L);v("sendGetUserParamStatus",u.prototype.J);v("sendIntentMatchResponse",u.prototype.K);v("onUserInteraction",u.prototype.I);
